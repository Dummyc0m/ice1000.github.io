<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0052)http://www.iwesoft.com/ -->
<html>
<head>
<title>pg_0004</title>

<style>
<!-- 
select {font-size:12px;}
A:link {text-decoration: none; color: blue}
A:visited {text-decoration: none; color: purple}
A:active {text-decoration: red}
A:hover {text-decoration: underline; color:red}
-->
</style>
<script TYPE="text/javascript"> 
<!-- hide 
function killerrors()
{ 
return true; 
} 
window.onerror = killerrors; 
// --> 
</script>
<style type="text/css">
<!--
.ft0{font-style:normal;font-weight:normal;font-size:16px;font-family:Calibri;color:#000000;}
.ft1{font-style:normal;font-weight:normal;font-size:16px;font-family:;color:#000000;}
.ft2{font-style:normal;font-weight:normal;font-size:16px;font-family:Calibri;color:#cc7832;}
.ft3{font-style:normal;font-weight:normal;font-size:16px;font-family:Calibri;color:#a9b7c6;}
.ft4{font-style:normal;font-weight:normal;font-size:16px;font-family:Calibri;color:#9876aa;}
.ft5{font-style:normal;font-weight:normal;font-size:16px;font-family:Calibri;color:#ffc66d;}
.ft6{font-style:normal;font-weight:normal;font-size:16px;font-family:Calibri;color:#bbb529;}
.ft7{font-style:italic;font-weight:normal;font-size:16px;font-family:Calibri;color:#a9b7c6;}
.ft8{font-style:italic;font-weight:normal;font-size:16px;font-family:Calibri;color:#9876aa;}
.ft9{font-style:normal;font-weight:normal;font-size:16px;font-family:Calibri;color:#b389c5;}
-->
</style>
</head>
<body vlink="#FFFFFF" link="#FFFFFF" bgcolor="#ffffff">

<script TYPE="text/javascript">
var currentpos,timer; 
function initialize() 
{ 
timer=setInterval("scrollwindow()",10);
} 
function sc(){
clearInterval(timer); 
}
function scrollwindow() 
{ 
currentpos=document.body.scrollTop; 
window.scroll(0,++currentpos); 
if (currentpos != document.body.scrollTop) 
sc();
} 
document.onmousedown=sc
document.ondblclick=initialize
</script>
<div style="position:absolute;top:0;left:0"><img width="827" height="1169" src="pg_0004.jpg" ALT=""></div>
<div style="position:absolute;top:102;left:158"><span class="ft0">Init</span></div>
<div style="position:absolute;top:102;left:184"><span class="ft1">方法是我自己搞出来给自己用的。作用其实就是&frac12;复杂的对话框颜色设</span></div>
<div style="position:absolute;top:123;left:125"><span class="ft1">置的代码封装起来，在外部能更好、更简&frac12;地调用。这里</span></div>
<div style="position:absolute;top:123;left:542"><span class="ft0">init</span></div>
<div style="position:absolute;top:123;left:568"><span class="ft1">的作用是根据消息</span></div>
<div style="position:absolute;top:144;left:125"><span class="ft1">的发送对象决定消息框的颜色以及方向。在这里就封装了&frac12;决之前的问题的代</span></div>
<div style="position:absolute;top:165;left:125"><span class="ft1">码。</span></div>
<div style="position:absolute;top:186;left:158"><span class="ft1">然后初始化一个</span></div>
<div style="position:absolute;top:186;left:279"><span class="ft0">Adapter</span></div>
<div style="position:absolute;top:186;left:333"><span class="ft1">。</span></div>
<div style="position:absolute;top:206;left:125"><span class="ft2">class</span></div>
<div style="position:absolute;top:206;left:160"><span class="ft3">MessageAdapter</span></div>
<div style="position:absolute;top:206;left:278"><span class="ft2">extends</span></div>
<div style="position:absolute;top:206;left:336"><span class="ft3">RecyclerView.Adapter</span></div>
<div style="position:absolute;top:206;left:489"><span class="ft3">{</span></div>
<div style="position:absolute;top:227;left:150"><span class="ft2">private</span></div>
<div style="position:absolute;top:227;left:201"><span class="ft3">OnItemClickListener</span></div>
<div style="position:absolute;top:227;left:341"><span class="ft4">onItemClickListener</span></div>
<div style="position:absolute;top:227;left:475"><span class="ft2">;</span></div>
<div style="position:absolute;top:248;left:150"><span class="ft2">public</span></div>
<div style="position:absolute;top:248;left:194"><span class="ft2">void</span></div>
<div style="position:absolute;top:248;left:227"><span class="ft5">setOnItemClickListener</span></div>
<div style="position:absolute;top:248;left:384"><span class="ft3">(</span></div>
<div style="position:absolute;top:269;left:200"><span class="ft3">OnItemClickListener</span></div>
<div style="position:absolute;top:269;left:340"><span class="ft3">onItemClickListener){</span></div>
<div style="position:absolute;top:290;left:175"><span class="ft2">this</span></div>
<div style="position:absolute;top:290;left:199"><span class="ft3">.</span></div>
<div style="position:absolute;top:290;left:203"><span class="ft4">onItemClickListener</span></div>
<div style="position:absolute;top:290;left:341"><span class="ft3">=</span></div>
<div style="position:absolute;top:290;left:353"><span class="ft3">onItemClickListener</span></div>
<div style="position:absolute;top:290;left:487"><span class="ft2">;</span></div>
<div style="position:absolute;top:311;left:150"><span class="ft3">}</span></div>
<div style="position:absolute;top:331;left:150"><span class="ft6">@Override</span></div>
<div style="position:absolute;top:352;left:150"><span class="ft2">public</span></div>
<div style="position:absolute;top:352;left:194"><span class="ft3">RecyclerView.ViewHolder</span></div>
<div style="position:absolute;top:352;left:372"><span class="ft5">onCreateViewHolder</span></div>
<div style="position:absolute;top:352;left:514"><span class="ft3">(ViewGroup</span></div>
<div style="position:absolute;top:352;left:599"><span class="ft3">parent</span></div>
<div style="position:absolute;top:352;left:644"><span class="ft2">,</span></div>
<div style="position:absolute;top:352;left:652"><span class="ft2">int</span></div>
<div style="position:absolute;top:373;left:125"><span class="ft3">viewType)</span></div>
<div style="position:absolute;top:373;left:197"><span class="ft3">{</span></div>
<div style="position:absolute;top:394;left:175"><span class="ft2">return</span></div>
<div style="position:absolute;top:394;left:221"><span class="ft2">new</span></div>
<div style="position:absolute;top:394;left:254"><span class="ft3">MessageViewHolder(LayoutInflater.</span></div>
<div style="position:absolute;top:394;left:497"><span class="ft7">from</span></div>
<div style="position:absolute;top:394;left:530"><span class="ft3">(MainActivity.</span></div>
<div style="position:absolute;top:394;left:625"><span class="ft2">this</span></div>
<div style="position:absolute;top:394;left:649"><span class="ft3">)</span></div>
<div style="position:absolute;top:415;left:225"><span class="ft3">.inflate(R.layout.</span></div>
<div style="position:absolute;top:415;left:337"><span class="ft8">message</span></div>
<div style="position:absolute;top:415;left:396"><span class="ft2">,</span></div>
<div style="position:absolute;top:415;left:404"><span class="ft3">parent</span></div>
<div style="position:absolute;top:415;left:449"><span class="ft2">,</span></div>
<div style="position:absolute;top:415;left:457"><span class="ft2">false</span></div>
<div style="position:absolute;top:415;left:489"><span class="ft3">))</span></div>
<div style="position:absolute;top:415;left:499"><span class="ft2">;</span></div>
<div style="position:absolute;top:436;left:150"><span class="ft3">}</span></div>
<div style="position:absolute;top:456;left:150"><span class="ft6">@Override</span></div>
<div style="position:absolute;top:477;left:150"><span class="ft2">public</span></div>
<div style="position:absolute;top:477;left:195"><span class="ft2">void</span></div>
<div style="position:absolute;top:477;left:227"><span class="ft5">onBindViewHolder</span></div>
<div style="position:absolute;top:477;left:355"><span class="ft3">(</span></div>
<div style="position:absolute;top:477;left:361"><span class="ft2">final</span></div>
<div style="position:absolute;top:477;left:394"><span class="ft3">RecyclerView.ViewHolder</span></div>
<div style="position:absolute;top:477;left:573"><span class="ft3">holder</span></div>
<div style="position:absolute;top:477;left:618"><span class="ft2">,</span></div>
<div style="position:absolute;top:477;left:626"><span class="ft2">int</span></div>
<div style="position:absolute;top:477;left:648"><span class="ft3">position)</span></div>
<div style="position:absolute;top:498;left:125"><span class="ft3">{</span></div>
<div style="position:absolute;top:519;left:175"><span class="ft3"> ((MessageViewHolder)holder).init(</span></div>
<div style="position:absolute;top:540;left:225"><span class="ft4">brain</span></div>
<div style="position:absolute;top:540;left:260"><span class="ft3">.getMessageByPosition(position)</span></div>
<div style="position:absolute;top:561;left:175"><span class="ft3">)</span></div>
<div style="position:absolute;top:561;left:180"><span class="ft2">;</span></div>
<div style="position:absolute;top:581;left:175"><span class="ft2">if</span></div>
<div style="position:absolute;top:581;left:187"><span class="ft3">(</span></div>
<div style="position:absolute;top:581;left:192"><span class="ft4">onItemClickListener</span></div>
<div style="position:absolute;top:581;left:330"><span class="ft3">!=</span></div>
<div style="position:absolute;top:581;left:348"><span class="ft2">null</span></div>
<div style="position:absolute;top:581;left:373"><span class="ft3">)</span></div>
<div style="position:absolute;top:581;left:382"><span class="ft3">{</span></div>
<div style="position:absolute;top:602;left:200"><span class="ft3">holder.</span></div>
<div style="position:absolute;top:602;left:248"><span class="ft4">itemView</span></div>
<div style="position:absolute;top:602;left:312"><span class="ft3">.setOnClickListener(</span></div>
<div style="position:absolute;top:623;left:250"><span class="ft2">new</span></div>
<div style="position:absolute;top:623;left:282"><span class="ft3">View.OnClickListener()</span></div>
<div style="position:absolute;top:623;left:439"><span class="ft3">{</span></div>
<div style="position:absolute;top:644;left:225"><span class="ft6">@Override</span></div>
<div style="position:absolute;top:665;left:225"><span class="ft2">public</span></div>
<div style="position:absolute;top:665;left:269"><span class="ft2">void</span></div>
<div style="position:absolute;top:665;left:302"><span class="ft5">onClick</span></div>
<div style="position:absolute;top:665;left:350"><span class="ft3">(View</span></div>
<div style="position:absolute;top:665;left:393"><span class="ft3">v)</span></div>
<div style="position:absolute;top:665;left:409"><span class="ft3">{</span></div>
<div style="position:absolute;top:686;left:250"><span class="ft4">onItemClickListener</span></div>
<div style="position:absolute;top:686;left:384"><span class="ft3">.onItemClick(</span></div>
<div style="position:absolute;top:686;left:473"><span class="ft9">holder</span></div>
<div style="position:absolute;top:686;left:517"><span class="ft3">.</span></div>
<div style="position:absolute;top:686;left:522"><span class="ft4">itemView</span></div>
<div style="position:absolute;top:686;left:586"><span class="ft2">,</span></div>
<div style="position:absolute;top:706;left:300"><span class="ft9">holder</span></div>
<div style="position:absolute;top:706;left:344"><span class="ft3">.getLayoutPosition())</span></div>
<div style="position:absolute;top:706;left:485"><span class="ft2">;</span></div>
<div style="position:absolute;top:727;left:225"><span class="ft3">}</span></div>
<div style="position:absolute;top:748;left:200"><span class="ft3">})</span></div>
<div style="position:absolute;top:748;left:210"><span class="ft2">;</span></div>
<div style="position:absolute;top:769;left:200"><span class="ft3">holder.</span></div>
<div style="position:absolute;top:769;left:248"><span class="ft4">itemView</span></div>
<div style="position:absolute;top:769;left:312"><span class="ft3">.setOnLongClickListener(</span></div>
<div style="position:absolute;top:790;left:250"><span class="ft2">new</span></div>
<div style="position:absolute;top:790;left:282"><span class="ft3">View.OnLongClickListener()</span></div>
<div style="position:absolute;top:790;left:471"><span class="ft3">{</span></div>
<div style="position:absolute;top:811;left:225"><span class="ft6">@Override</span></div>
<div style="position:absolute;top:831;left:225"><span class="ft2">public</span></div>
<div style="position:absolute;top:831;left:269"><span class="ft2">boolean</span></div>
<div style="position:absolute;top:831;left:328"><span class="ft5">onLongClick</span></div>
<div style="position:absolute;top:831;left:409"><span class="ft3">(View</span></div>
<div style="position:absolute;top:831;left:452"><span class="ft3">v)</span></div>
<div style="position:absolute;top:831;left:468"><span class="ft3">{</span></div>
<div style="position:absolute;top:852;left:250"><span class="ft4">onItemClickListener</span></div>
<div style="position:absolute;top:852;left:384"><span class="ft3">.onItemLongClick(</span></div>
<div style="position:absolute;top:852;left:505"><span class="ft9">holder</span></div>
<div style="position:absolute;top:852;left:550"><span class="ft3">.</span></div>
<div style="position:absolute;top:852;left:554"><span class="ft4">itemView</span></div>
<div style="position:absolute;top:852;left:618"><span class="ft2">,</span></div>
<div style="position:absolute;top:873;left:300"><span class="ft9">holder</span></div>
<div style="position:absolute;top:873;left:344"><span class="ft3">.getLayoutPosition())</span></div>
<div style="position:absolute;top:873;left:485"><span class="ft2">;</span></div>
<div style="position:absolute;top:894;left:250"><span class="ft2">return</span></div>
<div style="position:absolute;top:894;left:296"><span class="ft2">false;</span></div>
<div style="position:absolute;top:915;left:225"><span class="ft3">}</span></div>
<div style="position:absolute;top:936;left:200"><span class="ft3">})</span></div>
<div style="position:absolute;top:936;left:210"><span class="ft2">;</span></div>
<div style="position:absolute;top:956;left:200"><span class="ft3">holder.</span></div>
<div style="position:absolute;top:956;left:248"><span class="ft4">itemView</span></div>
<div style="position:absolute;top:956;left:312"><span class="ft3">.setOnTouchListener(</span></div>
<div style="position:absolute;top:977;left:250"><span class="ft2">new</span></div>
<div style="position:absolute;top:977;left:282"><span class="ft3">View.OnTouchListener()</span></div>
<div style="position:absolute;top:977;left:449"><span class="ft3">{</span></div>
<div style="position:absolute;top:998;left:225"><span class="ft6">@Override</span></div>
<div style="position:absolute;top:1019;left:225"><span class="ft2">public</span></div>
<div style="position:absolute;top:1019;left:269"><span class="ft2">boolean</span></div>
<div style="position:absolute;top:1019;left:328"><span class="ft5">onTouch</span></div>
<div style="position:absolute;top:1019;left:387"><span class="ft3">(View</span></div>
<div style="position:absolute;top:1019;left:430"><span class="ft3">v</span></div>
<div style="position:absolute;top:1019;left:437"><span class="ft2">,</span></div>
<div style="position:absolute;top:1019;left:445"><span class="ft3">MotionEvent</span></div>
<div style="position:absolute;top:1019;left:537"><span class="ft3">event)</span></div>
<div style="position:absolute;top:1019;left:584"><span class="ft3">{</span></div>
<div style="position:absolute;top:1040;left:250"><span class="ft4">onItemClickListener</span></div>
<div style="position:absolute;top:1040;left:384"><span class="ft3">.onItemTouch(</span></div>
<div style="position:absolute;top:1040;left:483"><span class="ft9">holder</span></div>
<div style="position:absolute;top:1040;left:527"><span class="ft3">.</span></div>
<div style="position:absolute;top:1040;left:532"><span class="ft4">itemView</span></div>
<div style="position:absolute;top:1040;left:596"><span class="ft2">,</span></div>
<script TYPE="text/javascript">
			var currentZoom = parent.ltop.currentZoom;
			if(currentZoom != undefined)
				document.body.style.zoom=currentZoom/100;
			</script>
</body>
</html>